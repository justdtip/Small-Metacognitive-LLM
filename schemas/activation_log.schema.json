{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ActivationLog",
  "type": "object",
  "required": ["request_id","model","device","timing","io","sections","text"],
  "properties": {
    "request_id": {"type": "string"},
    "model": {"type": "string"},
    "device": {"type": "string"},
    "decode": {"type": "object"},
    "timing": {
      "type": "object",
      "required": ["latency_s","tokens_per_sec"],
      "properties": {
        "latency_s": {"type": "number"},
        "tokens_per_sec": {"type": "number"}
      }
    },
    "io": {
      "type": "object",
      "required": ["input_tokens","output_tokens","visible_cot","prompt_preview"],
      "properties": {
        "input_tokens": {"type": "integer","minimum": 0},
        "output_tokens": {"type": "integer","minimum": 0},
        "visible_cot": {"type": "boolean"},
        "prompt_preview": {"type": ["string","null"]}
      }
    },
    "sections": {
      "type": "object",
      "required": ["think_tokens","answer_tokens"],
      "properties": {
        "think_tokens": {"type": "integer","minimum": 0},
        "answer_tokens": {"type": "integer","minimum": 0}
      }
    },
    "heads": {"type": ["object","null"]},
    "activations": {"type": ["object","null"]},
    "gates": {"type": ["object","null"]},
    "logprobs": {"type": ["array","null"]},
    "text": {
      "type": "object",
      "required": ["answer"],
      "properties": {
        "full": {"type": ["string","null"]},
        "answer": {"type": "string"}
      }
    }
  }
}

